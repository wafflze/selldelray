<html>
<head>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<!--script type="text/javascript" src="scripts/app.js"></script -->
<!--script type="text/javascript" src="scripts/FileSaver.js"></script-->
<!--script type="text/javascript" src="scripts/Demo.js"></script-->
</head>
<body> 

<script>
$(document).ready(function() {
	console.log('doc ready');

   $("#open").click(function() {
   //	console.log('clicked');
       $.ajax({
           url : "./scripts/html5test.csv?v=1",
           dataType: "text",
           cache: false,
           success : function (data) {
             console.log(data);
               $("#text").text(data);
           },
            error: function(data, errorThrown) {
              alert('request failed :'+errorThrown);
          }
       });
   });

   $("#submit").click(function(){
   debugger;
// grab the content of the form field and place it into a variable
    var textToWrite = document.getElementById("text").value;
//  create a new Blob (html5 magic) that conatins the data from your form feild
  //  var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'});
// Specify the name of the file to be saved
   // var fileNameToSaveAs = "//localhost/Precalculus/myNewFile.txt";
    
  //  var data = new FormData();
  //    data.append('file', $('#text').val());

  $.ajax({
      url: 'mvc url to save the file data',
      dataType: 'json',
      data: JSON.stringify(textToWrite),
      success: function (data){
          console.log('congrats you saved it :: ', data);
      },
      error: function (data, errorThrown) {
          console.error('save error :: ', errorThrown);
      }
  });
// Optionally allow the user to choose a file name by providing 
// an imput field in the HTML and using the collected data here
// var fileNameToSaveAs = txtFileName.text;

// create a link for our script to 'click'
  //  var downloadLink = document.createElement("a");
//  supply the name of the file (from the var above).
// you could create the name here but using a var
// allows more flexability later.
  //  downloadLink.download = fileNameToSaveAs;
// provide text for the link. This will be hidden so you
// can actually use anything you want.
 //   downloadLink.innerHTML = "My Hidden Link";
    
// allow our code to work in webkit & Gecko based browsers
// without the need for a if / else block.
//    window.URL = window.URL || window.webkitURL;
          
// Create the link Object.
  //  downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
// when link is clicked call a function to remove it from
// the DOM in case user wants to save a second file.
 //   downloadLink.onclick = destroyClickedElement;
// make sure the link is hidden.
//    downloadLink.style.display = "none";
// add the link to the DOM
  //  document.body.appendChild(downloadLink);
    
// click the new link
 //   downloadLink.click();


//function destroyClickedElement(event)
//{
// remove the link from the DOM
//    document.body.removeChild(event.target);
//}

// EOF
   });
}); 



</script>
<h1>csv to text area test
</h1>

<input id="open" type="button" value="READ" /> <br/>
<textarea name="text" id="text" rows="20" cols="100" placeholder="Load CSV Shit here"></textarea><br/>
<label>Filename: <input type="text" class="filename" id="text-filename" placeholder="a plain document"/>.csv</label>

<input type="submit" id="submit" value="Save" />

</body>
</html>